import javax.swing.*;
import java.awt.*;
import java.awt.image.*;
import javax.imageio.*;
import java.io.*;
import java.awt.event.KeyEvent; 
import java.awt.event.KeyListener; 

import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Toolkit;

public class Game extends JPanel
{
  //menu
  private MainMenu menu = new MainMenu(this); 
  //level
  private Level l1 = new Level();
  private boolean levelOn = false;
  //gravedigger
  private GraveDigger g1 = new GraveDigger(false, false, 0, 78, 0, 0, this);
  private Skeleton s1 = new Skeleton(0,200,0,0,this);
  
  public static void main (String[] args) throws InterruptedException  {
    JFrame frame = new JFrame("GraveDigger");
    Game gd = new Game();
    frame.add(gd);
    frame.setSize(1280, 960);
    
    frame.setVisible(true);
    
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    while (true) {
      gd.move(); 
      gd.repaint();
      Thread.sleep(10); 
    }
  }
  
  //returns the current x coordinate of the player
  public int getPlayerX(){
    return g1.getPlayerX();
  }
  
  //returns the current y coordinate of the player
  public int getPlayerY(){
    return g1.getPlayerY();
  }
  
  public Game()
  {
    
    
    addKeyListener(new KeyListener() {
      
      @Override
      public void keyTyped(KeyEvent e) {
      } 
      
      @Override
      public void keyReleased(KeyEvent e) {
        if(menu.getMenuOn())
          menu.keyReleased(e);
        g1.keyReleased(e);
      }  
      
      @Override    
      public void keyPressed(KeyEvent e) {
        g1.keyPressed(e);
      }
    });
    
    setFocusable(true);
  }
  
  public void setLevelOn(boolean a){
    levelOn =  a;
    System.out.println("game.setlevelon works");
  }
  
  public boolean getLevelOn(){
    return levelOn; 
  }
  
  @Override
  public void paint(Graphics g) {
    Graphics2D g2d = (Graphics2D) g;
    super.paint(g);
    
    if(levelOn)
     l1.paint(g2d);
    if(menu.getMenuOn())
      menu.paint(g2d);
    if(levelOn)
    {
      g1.paint(g2d);
      s1.paint(g2d);
    }
  }
  
  public void move(){
    if(levelOn){
      g1.move(); 
    }
  }
}

